import{c as f,j as t,r as c}from"./assets/client-DXcH-vAE.js";function v(e){const[s,l]=c.useState(()=>{var n;return(n=window.openai)==null?void 0:n[e]});return c.useEffect(()=>{const o=a=>{var d;const r=(d=window.openai)==null?void 0:d[e];r!==void 0&&(console.log(`[useOpenAiGlobal] ${e} updated:`,r),l(r))};window.addEventListener("openai:set_globals",o);const n=setInterval(()=>{var r;const i=(r=window.openai)==null?void 0:r[e];i!==void 0&&i!==s&&(console.log(`[useOpenAiGlobal] ${e} found via polling:`,i),l(i),clearInterval(n))},100);return()=>{window.removeEventListener("openai:set_globals",o),clearInterval(n)}},[e,s]),s}function m(){return v("toolOutput")}const j=({stockData:e,chartData:s})=>{const l=s.map(u=>u.price),o=l[l.length-1]||0,n=l[0]||0,a=Math.max(...l),i=Math.min(...l),r=o-n,d=n>0?r/n*100:0,p=r>=0?"#00C853":"#D32F2F",x=r>=0?"+":"",g=a>i?(o-i)/(a-i)*100:50;return t.jsxs("div",{style:{padding:"20px",fontFamily:"system-ui"},children:[t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("h2",{style:{margin:0},children:e.ticker}),t.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:e.companyName})]}),t.jsxs("div",{style:{background:"#f5f5f5",padding:"20px",borderRadius:"8px",marginBottom:"24px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Current Price"}),t.jsxs("div",{style:{fontSize:"42px",fontWeight:"bold",marginBottom:"8px"},children:["$",o.toFixed(2)]}),t.jsxs("div",{style:{color:p,fontSize:"20px"},children:[x,"$",Math.abs(r).toFixed(2)," (",x,d.toFixed(2),"%)"]})]}),t.jsxs("div",{style:{marginBottom:"24px"},children:[t.jsx("h3",{style:{fontSize:"16px",marginBottom:"16px"},children:"Today's Price Range"}),t.jsxs("div",{style:{position:"relative",height:"200px",background:"#fafafa",borderRadius:"8px",padding:"16px"},children:[t.jsxs("div",{style:{position:"absolute",left:"16px",top:"16px",fontSize:"12px",color:"#666"},children:["$",a.toFixed(2)]}),t.jsxs("div",{style:{position:"absolute",left:"16px",bottom:"16px",fontSize:"12px",color:"#666"},children:["$",i.toFixed(2)]}),t.jsxs("div",{style:{marginLeft:"60px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[t.jsx("div",{style:{height:"4px",background:"#e0e0e0",borderRadius:"2px"},children:t.jsx("div",{style:{position:"absolute",right:"0",fontSize:"12px",color:"#666",transform:"translateY(-50%)"},children:"High"})}),t.jsx("div",{style:{position:"absolute",top:`${100-g}%`,left:"60px",right:"0",height:"8px",background:p,borderRadius:"4px",transform:"translateY(-50%)"},children:t.jsxs("div",{style:{position:"absolute",right:"0",fontSize:"12px",color:p,fontWeight:"bold",transform:"translateY(-150%)"},children:["Current: $",o.toFixed(2)]})}),t.jsx("div",{style:{height:"4px",background:"#e0e0e0",borderRadius:"2px"},children:t.jsx("div",{style:{position:"absolute",right:"0",bottom:"0",fontSize:"12px",color:"#666",transform:"translateY(50%)"},children:"Low"})}),t.jsx("div",{style:{position:"absolute",top:`${100-(n-i)/(a-i)*100}%`,left:"60px",width:"40px",height:"2px",background:"#2196F3",transform:"translateY(-50%)"},children:t.jsxs("div",{style:{position:"absolute",left:"-50px",fontSize:"11px",color:"#2196F3",transform:"translateY(-50%)"},children:["Open: $",n.toFixed(2)]})})]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{style:{padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Data Points"}),t.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:s.length})]}),t.jsxs("div",{style:{padding:"16px",border:"1px solid #e0e0e0",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:"Day Range"}),t.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold"},children:["$",(a-i).toFixed(2)]})]})]}),t.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"#e3f2fd",borderRadius:"8px",fontSize:"13px",color:"#1976d2"},children:["ðŸ’¡ This is a simple chart. For production, consider using:",t.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[t.jsx("li",{children:"Recharts (lightweight)"}),t.jsx("li",{children:"Chart.js (popular)"}),t.jsx("li",{children:"TradingView (professional)"}),t.jsx("li",{children:"Lightweight Charts (by TradingView)"})]})]})]})},y=()=>{const e=m(),[s,l]=c.useState(null);if(c.useEffect(()=>{console.log("[StockChart] toolOutput changed:",e)},[e]),s)return t.jsx("div",{style:{padding:"20px",color:"#D32F2F"},children:s});if(!e||!e.stockData||!e.chartData)return t.jsxs("div",{style:{padding:"20px"},children:[t.jsx("div",{children:"Loading stock chart..."}),t.jsx("div",{style:{fontSize:"12px",color:"#999",marginTop:"8px"},children:"Waiting for chart data from MCP server"})]});const o=Array.isArray(e.chartData)?e.chartData:[];return o.length===0?t.jsxs("div",{style:{padding:"20px",color:"#D32F2F"},children:["No chart data available for ",e.stockData.ticker]}):t.jsx(j,{stockData:e.stockData,chartData:o})},h=document.getElementById("stock-chart-root");h&&f(h).render(t.jsx(y,{}));
