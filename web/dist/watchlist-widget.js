import{c as x,j as e,r as c}from"./assets/client.js";function g(n){const[o,i]=c.useState(()=>{var l;return(l=window.openai)==null?void 0:l[n]});return c.useEffect(()=>{const d=a=>{var r;const s=(r=window.openai)==null?void 0:r[n];s!==void 0&&(console.log(`[useOpenAiGlobal] ${n} updated:`,s),i(s))};window.addEventListener("openai:set_globals",d);const l=setInterval(()=>{var s;const t=(s=window.openai)==null?void 0:s[n];t!==void 0&&t!==o&&(console.log(`[useOpenAiGlobal] ${n} found via polling:`,t),i(t),clearInterval(l))},100);return()=>{window.removeEventListener("openai:set_globals",d),clearInterval(l)}},[n,o]),o}function f(){return g("toolOutput")}const u=({name:n,tickers:o,market:i})=>{const l=o.slice(0,5),a=o.length-5;return e.jsxs("div",{style:{padding:"24px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',maxWidth:"680px",margin:"0 auto",background:"#fff",borderRadius:"16px",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px",paddingBottom:"20px",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{width:"120px",height:"120px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"700",color:"white",textAlign:"center",padding:"12px",flexShrink:0},children:n}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#000",marginBottom:"4px"},children:n}),e.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:["Prompted by you â€¢ ",i," Watchlist"]})]})]}),e.jsx("div",{style:{marginBottom:"20px"},children:l.map((t,s)=>{var r;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",padding:"12px 8px",borderBottom:s<l.length-1?"1px solid #f5f5f5":"none",opacity:t.available?1:.5},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"4px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"14px",color:"#666",overflow:"hidden"},children:t.logo?e.jsx("img",{src:t.logo,alt:t.ticker,style:{width:"100%",height:"100%",objectFit:"cover"}}):t.ticker.slice(0,2)}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:"500",color:"#000",marginBottom:"2px",display:"flex",alignItems:"center",gap:"8px"},children:[t.ticker,t.available?e.jsx("span",{style:{color:"#4CAF50",fontSize:"18px"},children:"âœ“"}):e.jsx("span",{style:{color:"#EF5350",fontSize:"18px"},children:"âœ—"})]}),e.jsx("div",{style:{fontSize:"14px",color:"#666"},children:i==="Wall St"?"NYSE/NASDAQ":"ASX"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:t.price?"#000":"#666"},children:t.price?`$${t.price.toFixed(2)}`:"--"}),((r=t.marketData)==null?void 0:r.dailyReturnPercentageQuote)!=null&&e.jsxs("div",{style:{fontSize:"12px",fontWeight:"500",color:t.marketData.dailyReturnPercentageQuote>=0?"#4CAF50":"#EF5350"},children:[t.marketData.dailyReturnPercentageQuote>=0?"+":"",t.marketData.dailyReturnPercentageQuote.toFixed(2),"%"]})]})]},t.ticker)})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"20px",borderTop:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",fontSize:"14px",color:"#666"},children:a>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:"ðŸ“Š"}),e.jsxs("span",{children:["+ ",a," more"]})]})}),e.jsx("a",{href:"https://trading.hellostake.com/platform/watchlists",target:"_blank",rel:"noopener noreferrer",style:{padding:"12px 24px",background:"#000",color:"white",fontSize:"15px",fontWeight:"600",textDecoration:"none",borderRadius:"24px",transition:"all 0.2s ease",cursor:"pointer"},onMouseOver:t=>{t.currentTarget.style.background="#333"},onMouseOut:t=>{t.currentTarget.style.background="#000"},children:"Open on Stake"})]})]})},h=()=>{var i;const n=f();c.useEffect(()=>{console.log("[WatchlistWidget] toolOutput changed:",n)},[n]);const o=((i=n==null?void 0:n.result)==null?void 0:i.structuredContent)||n;return o?e.jsx(u,{name:o.name??"My Watchlist",tickers:o.tickers??[],market:o.market??"Wall St"}):e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:e.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"Building your watchlist..."})})},p=document.getElementById("watchlist-widget-root");p&&x.createRoot(p).render(e.jsx(h,{}));
