import{c as x,j as e,r as a}from"./assets/client-BtqsVDFO.js";function u(t){const[n,i]=a.useState(()=>{var s;return(s=window.openai)==null?void 0:s[t]});return a.useEffect(()=>{const o=p=>{var d;const r=(d=window.openai)==null?void 0:d[t];r!==void 0&&(console.log(`[useOpenAiGlobal] ${t} updated:`,r),i(r))};window.addEventListener("openai:set_globals",o);const s=setInterval(()=>{var r;const l=(r=window.openai)==null?void 0:r[t];l!==void 0&&l!==n&&(console.log(`[useOpenAiGlobal] ${t} found via polling:`,l),i(l),clearInterval(s))},100);return()=>{window.removeEventListener("openai:set_globals",o),clearInterval(s)}},[t,n]),n}function g(){return u("toolOutput")}const h=({success:t,tickers:n,message:i})=>e.jsxs("div",{style:{padding:"32px",fontFamily:"system-ui",maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[e.jsxs("div",{style:{padding:"24px",background:t?"#E8F5E9":"#FFEBEE",border:`2px solid ${t?"#4CAF50":"#EF5350"}`,borderRadius:"12px",marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"16px"},children:t?"✓":"✗"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:t?"#2E7D32":"#C62828",marginBottom:"8px"},children:t?"Watchlist Created!":"Failed to Create Watchlist"}),e.jsx("div",{style:{fontSize:"14px",color:"#666"},children:i})]}),t&&n.length>0&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#333"},children:"Stocks added to your watchlist:"}),e.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"},children:n.map(o=>e.jsx("div",{style:{padding:"12px 20px",background:"white",border:"2px solid #4CAF50",borderRadius:"8px",fontSize:"16px",fontWeight:"600",color:"#2E7D32"},children:o},o))})]}),e.jsx("a",{href:"https://trading.hellostake.com/platform/watchlists",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"16px 32px",background:"#000",color:"white",fontSize:"16px",fontWeight:"600",textDecoration:"none",borderRadius:"8px",transition:"all 0.2s ease",cursor:"pointer"},onMouseOver:o=>{o.currentTarget.style.background="#333"},onMouseOut:o=>{o.currentTarget.style.background="#000"},children:"View Watchlists on Stake"})]}),f=()=>{var i;const t=g();a.useEffect(()=>{console.log("[WatchlistWidget] toolOutput changed:",t)},[t]);const n=((i=t==null?void 0:t.result)==null?void 0:i.structuredContent)||t;return n?e.jsx(h,{success:n.success??!1,tickers:n.tickers??[],message:n.message??"Processing..."}):e.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:"Creating watchlist..."}),e.jsx("div",{style:{fontSize:"14px",color:"#999"},children:"Adding stocks to your Stake watchlist"})]})},c=document.getElementById("watchlist-widget-root");c&&x.createRoot(c).render(e.jsx(f,{}));
